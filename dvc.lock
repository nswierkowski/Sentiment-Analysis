schema: '2.0'
stages:
  raw_data_processing:
    cmd: python scripts/raw_data_processing.py ./data/raw ./data/processed/reviews.csv
    deps:
    - path: data/raw
      hash: md5
      md5: ba31c71c138e08c8069131a7d73e784d.dir
      size: 524018439
      nfiles: 7
    - path: scripts/raw_data_processing.py
      hash: md5
      md5: e26d5d5558d7a386486915d3e9cb908c
      size: 2000
    params:
      params.yaml:
        raw_data_processing.colums_not_to_keep:
        - brand_id
        - product_id
    outs:
    - path: data/processed/reviews.csv
      hash: md5
      md5: 5653b587199de010bebfaee5d26d5cbc
      size: 1633647954
  split:
    cmd: python scripts/split_processed_data.py ./data/processed/reviews.csv ./data/splitted
      0.2 true
    deps:
    - path: ./data/processed/reviews.csv
      hash: md5
      md5: 5653b587199de010bebfaee5d26d5cbc
      size: 1633647954
    - path: scripts/split_processed_data.py
      hash: md5
      md5: a66a264c2ce50410ef11aa71f26ba31f
      size: 1386
    outs:
    - path: ./data/splitted/X_test.csv
      hash: md5
      md5: a92a97bfed518cf07180d0ee46e99345
      size: 326045223
    - path: ./data/splitted/X_train.csv
      hash: md5
      md5: acd2ed538dd7fdff4dc59ffa0a12be8f
      size: 1305414527
    - path: ./data/splitted/y_test.csv
      hash: md5
      md5: ecc95312054fcc4b1bfce99f0316c458
      size: 437779
    - path: ./data/splitted/y_train.csv
      hash: md5
      md5: d16dd205c840347f27c8d5d6af012be7
      size: 1751069
  train:
    cmd: python scripts/train.py ./data/cleaned ./data/validate/cv_metrics_all_modes.csv
      ./params.yaml ./metrics.json
    deps:
    - path: data/cleaned/X_test_cleaned.csv
      hash: md5
      md5: c4a22f67b3a31aedf3acaa9397436e00
      size: 1312857
    - path: data/cleaned/y_test_cleaned.csv
      hash: md5
      md5: 3723b765014835d3b3eebead7d5eb5ac
      size: 2013
    - path: params.yaml
      hash: md5
      md5: 84d29b82722055f585e0a2932c3a69bc
      size: 301
    - path: scripts/train.py
      hash: md5
      md5: 764252cf975fbfa45292333b3ed9d037
      size: 6292
    outs:
    - path: metrics.json
      hash: md5
      md5: 88c6f45566d9c7ebea3771ab42d43da9
      size: 951
  execute_notebook:
    cmd: papermill notebooks/exploratory_analysis.ipynb data/processed/exploratory_analysis.ipynb
    deps:
    - path: data/processed/reviews.csv
      hash: md5
      md5: 5653b587199de010bebfaee5d26d5cbc
      size: 1633647954
    - path: notebooks/exploratory_analysis.ipynb
      hash: md5
      md5: 8a45d5ab6298b52b23834d553b34cf3b
      size: 13646
    outs:
    - path: data/processed/exploratory_analysis.ipynb
      hash: md5
      md5: cda9915c962e1ed8beab55a50e747d39
      size: 641241
  clean_data:
    cmd: python3 scripts/clean_data.py ./data/splitted ./data/cleaned ./params.yaml
    deps:
    - path: ./data/splitted/X_test.csv
      hash: md5
      md5: a92a97bfed518cf07180d0ee46e99345
      size: 326045223
    - path: ./data/splitted/X_train.csv
      hash: md5
      md5: acd2ed538dd7fdff4dc59ffa0a12be8f
      size: 1305414527
    - path: ./data/splitted/y_test.csv
      hash: md5
      md5: ecc95312054fcc4b1bfce99f0316c458
      size: 437779
    - path: ./data/splitted/y_train.csv
      hash: md5
      md5: d16dd205c840347f27c8d5d6af012be7
      size: 1751069
    - path: params.yaml
      hash: md5
      md5: 84d29b82722055f585e0a2932c3a69bc
      size: 301
    - path: scripts/clean_data.py
      hash: md5
      md5: e5754e0772043dc2c4b45f5b1afc8b62
      size: 3231
    outs:
    - path: data/cleaned/X_test_cleaned.csv
      hash: md5
      md5: c4a22f67b3a31aedf3acaa9397436e00
      size: 1312857
    - path: data/cleaned/X_train_cleaned.csv
      hash: md5
      md5: 395d4738e608d6f8ed042163527b7462
      size: 1340976
    - path: data/cleaned/y_test_cleaned.csv
      hash: md5
      md5: 3723b765014835d3b3eebead7d5eb5ac
      size: 2013
    - path: data/cleaned/y_train_cleaned.csv
      hash: md5
      md5: 158f05b50298b352b55a7dec21f0eb9e
      size: 2013
  validate:
    cmd: python3 scripts/validate.py ./data/cleaned ./data/validate ./params.yaml
    deps:
    - path: data/cleaned/X_test_cleaned.csv
      hash: md5
      md5: c4a22f67b3a31aedf3acaa9397436e00
      size: 1312857
    - path: data/cleaned/X_train_cleaned.csv
      hash: md5
      md5: 395d4738e608d6f8ed042163527b7462
      size: 1340976
    - path: data/cleaned/y_test_cleaned.csv
      hash: md5
      md5: 3723b765014835d3b3eebead7d5eb5ac
      size: 2013
    - path: data/cleaned/y_train_cleaned.csv
      hash: md5
      md5: 158f05b50298b352b55a7dec21f0eb9e
      size: 2013
    - path: params.yaml
      hash: md5
      md5: 84d29b82722055f585e0a2932c3a69bc
      size: 301
    - path: scripts/validate.py
      hash: md5
      md5: d65ef78fa376e64babb0c528ca37bf13
      size: 3253
    outs:
    - path: data/validate/cv_metrics_all_modes.csv
      hash: md5
      md5: c92b339a644af935089254741da28259
      size: 3693
